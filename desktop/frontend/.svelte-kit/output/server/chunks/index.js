import{D as n,K as t}from"./index2.js";import"clsx";const e=[];function s(n,t){return{subscribe:o(n,t).subscribe}}function o(s,o=n){let r=null;const i=new Set;function u(n){if(t(s,n)&&(s=n,r)){const n=!e.length;for(const t of i)t[1](),e.push(t,s);if(n){for(let n=0;n<e.length;n+=2)e[n][0](e[n+1]);e.length=0}}}function c(n){u(n(s))}return{set:u,update:c,subscribe:function(t,e=n){const f=[t,e];return i.add(f),1===i.size&&(r=o(u,c)||n),t(s),()=>{i.delete(f),0===i.size&&r&&(r(),r=null)}}}}export{s as r,o as w};
